BaseTreeTable=function(){function e(){this.eventHandlerDictionary=[],this.parentContainerId="",this.maxColumnWidth=500}return e.prototype.getContext=function(){return document.getElementById(this.parentContainerId)},e.prototype.getElements=function(e){var t='[data-ParentId="'+e+'"]',i=this.getContext().querySelectorAll(t);return i},e.prototype.hasClass=function(e,t){return(" "+e.className+" ").indexOf(" "+t+" ")>-1},e.prototype.showChildren=function(e,t,i,n){var s=this.getContext().querySelector('[data-id="'+e+'"]');void 0!=s&&(s.className=s.className.replace(" collapsed",""));for(var a=this.getElements(e),o=0;o<a.length;o++){var r=a[o].dataset.id,l='[data-id="'+r+'"] td',d=a[o].querySelector(l+" .vjoinendcollapsible, "+l+" .vjoincollapsible");null!==d&&this.showChildren(r,null,null,null),a[o].style.display="table-row"}void 0!=t&&(t.className="base "+n,this.registerEventSingle(t,"click",this.eventHandlerDictionary[n]))},e.prototype.hideChildren=function(e,t,i,n){var s=this.getContext().querySelector('[data-id="'+e+'"]');void 0!=s&&(s.className=s.className+" collapsed"),void 0!=t&&(this.hideUnderlyingElements(e),t.className="base "+n,this.registerEventSingle(t,"click",this.eventHandlerDictionary[n]))},e.prototype.hideUnderlyingElements=function(e){for(var t=this.getElements(e),i=0;i<t.length;i++){var n=t[i].dataset.id;this.hideUnderlyingElements(n),t[i].style.display="none"}},e.prototype.createSpan=function(e){var t=document.createElement("SPAN");return t.className=e,t},e.prototype.addIdentation=function(e,t,i){t+=1;for(var n=0;n<e.length;n++){var s=t,a=e[n].dataset.id,o=e[n].getElementsByTagName("td")[0],r=this.getElements(a),l=r.length>0,d=n===e.length-1;d?i[t-1]=this.createSpan("base spacer"):i[t-1]=this.createSpan("base vline");var h=null,p=o.parentElement;for(this.hasClass(p,"collapsed")&&(h="collapsed");s-1>=1;)s-=1,s===t-1&&"collapsed"===h&&l&&!d?(o.insertBefore(this.createSpan("base vjoinexpandable"),o.childNodes[0]),this.hideUnderlyingElements(p.dataset.id)):s===t-1&&"collapsed"===h&&l&&d?(o.insertBefore(this.createSpan("base vjoinendexpandable"),o.childNodes[0]),this.hideUnderlyingElements(p.dataset.id)):s===t-1&&l&&d?o.insertBefore(this.createSpan("base vjoinendcollapsible"),o.childNodes[0]):s===t-1&&l&&!d?o.insertBefore(this.createSpan("base vjoincollapsible"),o.childNodes[0]):s!==t-1||l||d?s===t-1&&!l&&d?o.insertBefore(this.createSpan("base vjoinend"),o.childNodes[0]):void 0!==i[s]&&o.insertBefore(i[s].cloneNode(),o.childNodes[0]):o.insertBefore(this.createSpan("base vjoin"),o.childNodes[0]);this.addIdentation(r,t,i)}},e.prototype.insertIndentations=function(){for(var e=this.getContext().querySelectorAll("tr:not([data-parentId])"),t=0;t<e.length;t++){var i=1,n=e[t].dataset.id,s=this.getElements(n),a=t===e.length-1,o=[];a?o[i]=this.createSpan("base spacer"):o[i]=this.createSpan("base vline"),this.addIdentation(s,i,o)}},e.prototype.getParentElementId=function(e){var t=e.parentElement.parentElement,i=t.dataset.id;return i},e.prototype.initEventHandlerDictionary=function(){var e=this;this.eventHandlerDictionary.vjoinexpandable=function(){console.log("vjoinexpandable");var t=e.getParentElementId(this);e.showChildren(t,this,"vjoinexpandable","vjoincollapsible")},this.eventHandlerDictionary.vjoincollapsible=function(){console.log("vjoincollapsible");var t=e.getParentElementId(this);console.log(" t = " +  e.getContext().querySelector('[data-id="'+t+'"]') );r = e.getContext().querySelector('[data-id="'+t+'"]') ;console.log(r.className);d=e.getContext().querySelector("td");console.log(" d " + d.className);e.hideChildren(t,this,"vjoincollapsible","vjoinexpandable")},this.eventHandlerDictionary.vjoinendexpandable=function(){console.log("vjoinendexpandable");var t=e.getParentElementId(this);e.showChildren(t,this,"vjoinendexpandable","vjoinendcollapsible")},this.eventHandlerDictionary.vjoinendcollapsible=function(){console.log("vjoinendcollapsible");var t=e.getParentElementId(this);e.hideChildren(t,this,"vjoinendcollapsible","vjoinendexpandable")},this.eventHandlerDictionary.pushpinClick=function(t){for(var i=this,n=this;(n=n.parentElement)&&!n.classList.contains("popout"););n.removeEventListener("mouseout",e.eventHandlerDictionary.popOutMouseOut),i.className.indexOf("pinned")>-1?i.className=i.className.replace(" pinned",""):i.className+=" pinned"},this.eventHandlerDictionary.descriptionMouseIn=function(t){this.className.indexOf("popouthover")===-1&&(this.className+=" popouthover"),e.applyShowAllStyles(this);var i=this.querySelector(".pushpin");i.style.display="initial"},this.eventHandlerDictionary.descriptionMouseOut=function(t){var i=this.querySelector(".pinned");if(null===i){var n=this.querySelector(".pushpin");n.style.display="none",e.applyHideLongTextStyles(this),this.className=this.className.replace(" popouthover","")}else e.applyShowAllStyles(this),this.style.display="inline-block"}},e.prototype.registerEventSingle=function(e,t,i){"click"===t?e.onclick=i:"dblclick"===t?e.ondblclick=i:e.addEventListener(t,i)},e.prototype.registerEvent=function(e,t,i){for(var n=this.getContext().getElementsByClassName(e),s=0;s<n.length;s++){var a=n[s];this.registerEventSingle(a,t,i)}},e.prototype.registerForEvents=function(){this.registerEvent("vjoinexpandable","click",this.eventHandlerDictionary.vjoinexpandable),this.registerEvent("vjoincollapsible","click",this.eventHandlerDictionary.vjoincollapsible),this.registerEvent("vjoinendcollapsible","click",this.eventHandlerDictionary.vjoinendcollapsible),this.registerEvent("vjoinendexpandable","click",this.eventHandlerDictionary.vjoinendexpandable),this.registerEvent("pushpin","click",this.eventHandlerDictionary.pushpinClick),this.registerEvent("popout","mouseover",this.eventHandlerDictionary.descriptionMouseIn),this.registerEvent("popout","mouseout",this.eventHandlerDictionary.descriptionMouseOut)},e.prototype.resizeToMaxColumnWidth=function(e){for(var t=document.getElementById(e),i=t.getElementsByTagName("td"),n=0;n<i.length;n++){var s=i[n];if("description"===s.className){var a=s.getBoundingClientRect();if(a.width>this.maxColumnWidth){s.className+=" popout",this.applyHideLongTextStyles(s);var o=document.createElement("div"),r=document.createElement("span"),l=s.childNodes[0];r.className="glyphicon glyphicon-pushpin pushpin",o.className="spanContainer",o.appendChild(r),s.insertBefore(o,l)}}}},e.prototype.applyShowAllStyles=function(e){e.style.overflow="visible",e.style.whiteSpace="normal"},e.prototype.applyHideLongTextStyles=function(e){e.style.overflow="hidden",e.style.whiteSpace="nowrap"},e.prototype.init=function(e){this.parentContainerId=e,this.initEventHandlerDictionary(),this.insertIndentations(),this.resizeToMaxColumnWidth(e),this.registerForEvents()},e.prototype.expandAll=function(e){ for(var a=document.getElementById(e).querySelectorAll("tr"),t=0;t<a.length-1;t++){a[t].className=a[t].className.replace(" collapsed","");a[t].style="";}for(var a=document.getElementById(e).querySelectorAll("span"),t=0;t<a.length-1;t++){a[t].className = "";}},e}();